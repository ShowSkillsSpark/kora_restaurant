import{r as e}from"./phaser-y5S3hZEA.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var t=e();const s=1600;var a=(e=>(e.POT="냄비",e.STEAMER="찜기",e.CUP="컵",e))(a||{}),i=(e=>(e.RICE_CAKE="떡",e.SAUCE="떡볶이소스",e.FISH_CAKE="어묵",e.SPRING_ONION="파",e.NOODLE="면",e.RAMEN_SOUP="라면스프",e.EGG="계란",e.SESAME="참깨",e.SUNDAE="순대",e.DUMPLING="만두",e.WATER="물",e.CIDER="사이다",e.COLA="콜라",e))(i||{}),n=(e=>(e.KORA_TTEOKBOKKI="코라떡볶이",e.JAKO_RAMEN="쟈코라면",e.NANDE_SUNDAE="난데순대",e.DAEDU_DUMPLING="대두왕만두",e.TAP_WATER="수돗물",e.URU_CIDER="우루사이다",e.KORA_COLA="코라콜라",e))(n||{});const o=[["모구모구","우마이!"],["맛있게 먹었습니다~"],["우마이!","오츠레이!"],["음~","오츠코라"],["음!","약해보이는데... 의외로 맛있네?"]];class r extends t.GameObjects.Container{constructor(e,t,s,a,i,n){super(e,t,s),e.add.existing(this),this.scene=e,this.remain_time=n,this.elapsed=0,sessionStorage.setItem("earn","0");const o=e.add.text(-a/4-100,0,"남은 시간",{fontSize:i/2,color:"#ffffff",fontFamily:"StudyHard",stroke:"#000000",strokeThickness:4}).setOrigin(.5);this.time_text=e.add.text(-a/4+100,0,this.remain_time+" 초",{fontSize:i/2,color:"#ffffff",fontFamily:"StudyHard",stroke:"#000000",strokeThickness:4}).setOrigin(.5).setPadding(10),this.add([o,this.time_text]);const r=e.add.text(a/4-100,0,"매출",{fontSize:i/2,color:"#ffffff",fontFamily:"StudyHard",stroke:"#000000",strokeThickness:4}).setOrigin(.5);this.earn_text=e.add.text(a/4+100,0,"0 치즈",{fontSize:i/2,color:"#ffffff",fontFamily:"StudyHard",stroke:"#000000",strokeThickness:4}).setOrigin(.5).setPadding(10),this.add([r,this.earn_text]),this.remain_timer=e.time.addEvent({delay:1e3,callback:()=>{this.elapsed+=1,this.elapsed>this.remain_time?e.scene.start("GameOver"):this.time_text.setText(this.remain_time-this.elapsed+" 초")},loop:!0,paused:!0})}resetTimer(){this.remain_timer.paused=!0,this.elapsed=0}startTimer(){this.remain_timer.paused=!1}addEarn(e){let t=parseInt(sessionStorage.getItem("earn")||"0");t+=e,sessionStorage.setItem("earn",t.toString()),this.earn_text.setText(t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" 치즈"),this.scene.sound.play("pay1",{volume:.5})}static preload(e){e.load.setPath("assets/MainGame"),e.load.audio("pay1","06.계산.mp3"),e.load.image("help","help.png")}}const h=class{constructor(e,t,s,a,i,n,o){this.name=e,this.base_price=t,this.plus_price=s,this.tool_name=a,this.necessary=new Set(i),this.plus=new Set(n),this.temperature_range=o}calculatePrice(e){if(this.tool_name!=e.name)return 0;let t=0,s=0;if(e.box.forEach((e=>{this.necessary.has(e)?t+=1:this.plus.has(e)?s+=1:s-=3})),t<this.necessary.size)return 0;let a=0;for(let i of this.temperature_range){const t=i[0];if(!(e.temperature>t))break;a=i[1]}return this.base_price+(s+a)*this.plus_price}toString(){return this.name}};h.kora_tteokbokki=new h(n.KORA_TTEOKBOKKI,4e3,200,a.POT,[i.WATER,i.RICE_CAKE,i.SAUCE],[i.FISH_CAKE,i.SPRING_ONION,i.EGG,i.SESAME,i.NOODLE],[[0,-8],[5,1],[8,2],[10,-8]]),h.jako_ramen=new h(n.JAKO_RAMEN,4e3,200,a.POT,[i.WATER,i.NOODLE,i.RAMEN_SOUP],[i.FISH_CAKE,i.SPRING_ONION,i.EGG,i.SESAME,i.DUMPLING,i.RICE_CAKE],[[0,-8],[5,1],[8,2],[10,-8]]),h.nande_sundae=new h(n.NANDE_SUNDAE,3e3,150,a.STEAMER,[i.WATER,i.SUNDAE],[],[[0,-6],[5,1],[8,2],[10,-6]]),h.daedu_dumpling=new h(n.DAEDU_DUMPLING,3e3,150,a.STEAMER,[i.WATER,i.DUMPLING],[],[[0,-6],[5,1],[8,2],[10,-6]]),h.tap_water=new h(n.TAP_WATER,1e3,100,a.CUP,[i.WATER],[],[[0,0]]),h.uru_cider=new h(n.URU_CIDER,1e3,100,a.CUP,[i.CIDER],[],[[0,0]]),h.kora_cola=new h(n.KORA_COLA,1e3,100,a.CUP,[i.COLA],[],[[0,0]]);let d=h;class l extends t.GameObjects.Container{constructor(e,t,s,a,i,n){super(e,t,s),this.requirement_list=[],this.tool_list=[],this.cost=0,this.gender="man",this.step=6,this.progress=[],this.progress_index=0,this.tap_water_only_flag=!1,e.add.existing(this),this.setSize(a,i),this.text_bg=e.add.image(0,-i/10,"talk").setOrigin(.5),this.text_bg.setScale(a/this.text_bg.width,i/this.text_bg.height*.7),this.cost_text=e.add.text(0,3*i/20,"+0 치즈",{fontSize:.25*i,color:"#ffffff",fontFamily:"StudyHard",stroke:"#000000",strokeThickness:4}).setOrigin(.5).setPadding(10),this.text=e.add.text(0,-3*i/20,"콘레이",{fontSize:.15*i,color:"#000000",fontFamily:"StudyHard",wordWrap:{width:.9*a}}).setOrigin(.5).setPadding(10),this.updateText(),this.face=e.add.image(0,7*i/20,this.gender+this.step).setOrigin(.5),this.face.setScale(i/this.face.height*.7),this.initFace(),this.updateFace();const o=e.add.zone(0,0,a,i).setRectangleDropZone(a,i).setName("order");o.setData("order",this),this.add([this.cost_text,this.text_bg,this.text,this.face,o]),this.progress_timer=e.time.addEvent({delay:1e3,callback:()=>{this.progress_index+=1,this.progress_index<this.progress.length?this.text.setText(this.progress[this.progress_index]):(this.tool_list.forEach((e=>{e.returnTool()})),this.hide=!0,this.respawn_timer.paused=!1,n(this.cost),this.cost=0,this.progress_timer.paused=!0)},loop:!0,paused:!0}),this.respawn_timer=e.time.addEvent({delay:1e3,callback:()=>{this.newOrder()},loop:!1,paused:!0}),this.hide=!1}submit(e){e.disableInteractive(),this.tool_list.push(e);const t=this.tool_list.length;this.tool_list.forEach(((e,s)=>{const a=this.x-this.width/2+(s+1)*this.width/(t+1),i=this.y+3*this.height/8;e.move(a,i)}));let s=null,a=0;this.requirement_list.forEach(((t,i)=>{const n=t.calculatePrice(e);n>a&&(s=i,a=n)})),null!=s?(this.requirement_list.splice(s,1),this.updateText(),this.cost+=a,this.step=Math.min(this.step+1,9)):this.tap_water_only_flag?(this.step=Math.min(this.step+1,8),this.cost=9e3):this.step=Math.max(this.step-1,0),this.updateFace(),0==this.requirement_list.length?(this.cost_text.setText("+"+this.cost.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" 치즈"),this.progress_timer.paused=!1,this.scene.sound.play("eat"+Math.floor(1*Math.random()+1),{volume:.05})):this.scene.sound.play("ingredient1",{volume:.1,seek:.15})}updateText(){if(this.requirement_list.length>0){const e=this.requirement_list.join(", ")+" 주세요.";this.text.setText(e)}else this.text.setText(this.progress[this.progress_index])}initFace(){const e=["man","woman"];this.gender=e[Math.floor(Math.random()*e.length)],this.step=6}updateFace(){this.face.setTexture(this.gender+this.step),this.face.update()}randomRequirementList(){const e=[],t=[d.kora_tteokbokki,d.jako_ramen,d.nande_sundae,d.daedu_dumpling,null,null,null],s=[d.tap_water,d.uru_cider,d.kora_cola,null],a=t[Math.floor(Math.random()*t.length)],i=a?s[Math.floor(Math.random()*s.length)]:d.tap_water;return a&&e.push(a),i&&e.push(i),e}randomProgress(){return o[Math.floor(Math.random()*o.length)]}newOrder(){this.initFace(),this.updateFace(),this.requirement_list=this.randomRequirementList(),this.updateText(),this.tool_list=[],this.cost=0,this.progress=this.randomProgress(),this.progress_index=0,this.progress_timer.paused=!0,this.respawn_timer.reset({delay:1e3,callback:()=>{this.newOrder()},loop:!1,paused:!0}),this.hide=!1,this.tap_water_only_flag=1==this.requirement_list.length&&this.requirement_list[0]===d.tap_water}set hide(e){this.text_bg.visible=!e,this.text.visible=!e,this.face.visible=!e,this.cost_text.visible=e}static preload(e){e.load.setPath("assets/MainGame"),e.load.image("talk","fukidashi_pop06.png"),e.load.image("man0","face_angry_man5.png"),e.load.image("man1","face_angry_man4.png"),e.load.image("man2","face_angry_man3.png"),e.load.image("man3","face_angry_man2.png"),e.load.image("man4","face_angry_man1.png"),e.load.image("man5","face_smile_man1.png"),e.load.image("man6","face_smile_man2.png"),e.load.image("man7","face_smile_man3.png"),e.load.image("man8","face_smile_man4.png"),e.load.image("man9","face_smile_man5.png"),e.load.image("woman0","face_angry_woman5.png"),e.load.image("woman1","face_angry_woman4.png"),e.load.image("woman2","face_angry_woman3.png"),e.load.image("woman3","face_angry_woman2.png"),e.load.image("woman4","face_angry_woman1.png"),e.load.image("woman5","face_smile_woman1.png"),e.load.image("woman6","face_smile_woman2.png"),e.load.image("woman7","face_smile_woman3.png"),e.load.image("woman8","face_smile_woman4.png"),e.load.image("woman9","face_smile_woman5.png"),e.load.audio("eat1","04. 한입.mp3")}}class m extends t.GameObjects.Container{constructor(e,t,s,a,i){super(e,t,s),e.add.existing(this);const n=e.add.plane(0,i/2,"wood").setDisplaySize(1.15*a,i);n.rotateX=-30,this.add([n])}static preload(e){e.load.setPath("assets/MainGame"),e.load.image("wood","wood_texture.jpg")}}class p extends t.GameObjects.Container{constructor(e,t,s,a,i,n){super(e,t,s),e.add.existing(this),this.returnX=t,this.returnY=s,this.name=n;const o=e.add.image(0,0,n).setScale(.45),r=e.add.text(0,0,n,{fontSize:.7*i,color:"#000000",fontFamily:"StudyHard",stroke:"#ffffff",strokeThickness:2}).setOrigin(.5).setPadding(10);this.add([o,r]),this.setSize(a,i).setInteractive({draggable:!0}),this.on("dragstart",(t=>{e.children.bringToTop(this)})),this.on("drag",((e,t,s)=>{this.setPosition(t,s)})),this.on("dragend",((e,t,s,a)=>{this.setPosition(this.returnX,this.returnY)})),this.on("drop",((e,t)=>{const s=t.getData("tool");s&&s.putIngredient(this.name),this.setPosition(this.returnX,this.returnY)}))}static preload(e){e.load.setPath("assets/MainGame"),e.load.audio("ingredient1","20. 불쑥.mp3"),e.load.image("empty","empty.png"),e.load.image(i.RICE_CAKE,"rice_cake.png"),e.load.image(i.NOODLE,"noodle.png"),e.load.image(i.SAUCE,"sauce.png"),e.load.image(i.RAMEN_SOUP,"soup.png"),e.load.image(i.FISH_CAKE,"fish_cake.png"),e.load.image(i.EGG,"egg.png"),e.load.image(i.SPRING_ONION,"spring_onion.png"),e.load.image(i.SESAME,"sesame.png"),e.load.image(i.SUNDAE,"sundae.png"),e.load.image(i.DUMPLING,"dumpling.png")}}class g extends t.GameObjects.Container{constructor(e,t,s,a,i,n){super(e,t,s),e.add.existing(this),this.width=a,this.height=i,this.name=n;const o=e.add.image(0,i/8,"tray").setScale(.28);this.add(o)}createIngredients(){const e=this.parentContainer.x+this.x,t=this.parentContainer.y+this.y,s=.8*this.width,a=.8*this.height;new p(this.scene,e,t,s,a,this.name),new p(this.scene,e,t,s,a,this.name)}static preload(e){e.load.setPath("assets/MainGame"),e.load.image("tray","tray.png")}}class c extends t.GameObjects.Container{constructor(e,t,s,a,i,n){super(e,t,s),e.add.existing(this),this.name=n;const o=e.add.image(0,-i/10,"tap").setScale(.8),r=e.add.image(0,0,"below"),h=e.add.text(0,i/20,n,{fontSize:i/3,color:"#000000",fontFamily:"StudyHard",stroke:"#ffffff",strokeThickness:i/30}).setOrigin(.5).setPadding(10),d=e.add.zone(0,0,a,i).setRectangleDropZone(a,i).setName("tap");d.setData("tool",null),this.add([h,d]),this.add([o,r])}static preload(e){e.load.setPath("assets/MainGame"),e.load.image("tap","dispenser_tap.png"),e.load.image("below","dispenser_below.png")}}class u extends t.GameObjects.Container{constructor(e,t,s,a,n){super(e,t,s),e.add.existing(this);const o=new g(e,-7*a/16,-n/4,a/8,n/2,i.RICE_CAKE),r=new g(e,-5*a/16,-n/4,a/8,n/2,i.SAUCE),h=new g(e,-3*a/16,-n/4,a/8,n/2,i.FISH_CAKE),d=new g(e,-1*a/16,-n/4,a/8,n/2,i.SPRING_ONION),l=new g(e,1*a/16,-n/4,a/8,n/2,i.SUNDAE),m=new g(e,-7*a/16,n/4,a/8,n/2,i.NOODLE),p=new g(e,-5*a/16,n/4,a/8,n/2,i.RAMEN_SOUP),u=new g(e,-3*a/16,n/4,a/8,n/2,i.EGG),_=new g(e,-1*a/16,n/4,a/8,n/2,i.SESAME),f=new g(e,1*a/16,n/4,a/8,n/2,i.DUMPLING),E=new c(e,3*a/16,0,a/8,n,i.WATER),x=new c(e,5*a/16,0,a/8,n,i.CIDER),S=new c(e,7*a/16,0,a/8,n,i.COLA);this.add([o,r,h,d,l,m,p,u,_,f,E,x,S]),[o,r,h,d,l,m,p,u,_,f].forEach((e=>{e.createIngredients()}))}}class _ extends t.GameObjects.Container{constructor(e,t,s,a,i){super(e,t,s),e.add.existing(this);const n=e.add.image(0,0,"aaa").setOrigin(.5,0).setScale(.7),o=e.add.zone(0,0,a,i).setRectangleDropZone(a,i).setName("burner");o.setData("tool",null),this.add([n,o])}static preload(e){e.load.setPath("assets/MainGame"),e.load.image("aaa","burner.png")}}class f extends t.GameObjects.Container{constructor(e,t,s,a,i){super(e,t,s),e.add.existing(this),this.trash_image=e.add.image(0,0,"trash_close").setScale(.25);const n=e.add.zone(0,0,a,i).setRectangleDropZone(a,i).setName("trash");n.setData("open",(()=>{this.trash_image.setTexture("trash_open")})),n.setData("close",(()=>{this.trash_image.setTexture("trash_close")})),this.add([this.trash_image,n])}static preload(e){e.load.setPath("assets/MainGame"),e.load.image("trash_open","trash_open.png"),e.load.image("trash_close","trash_close.png")}}class E extends t.GameObjects.Container{constructor(e,t,s,n,o,r){super(e,t,s),this.lastZone=null,this.tool_image={},this.box=new Set,e.add.existing(this),this.scene=e,this.toolX=t,this.toolY=s,this.returnX=t,this.returnY=s,this.name=r,this.temperature=0,this.temperatureEvent=e.time.addEvent({delay:1e3,callback:()=>this.increaseTemperature(),loop:!0,paused:!0}),this.tool_image.empty=e.add.image(0,-o/4,"empty").setScale(.35),this.tool_image[a.CUP]=e.add.image(0,0,"cup").setOrigin(.5,.3).setScale(.15).setAlpha(.9),this.tool_image.cup_water=e.add.image(0,0,"cup_water").setOrigin(.5,.3).setScale(.15).setAlpha(.9),this.tool_image.cup_cider=e.add.image(0,0,"cup_cider").setOrigin(.5,.3).setScale(.15).setAlpha(.9),this.tool_image.cup_cola=e.add.image(0,0,"cup_cola").setOrigin(.5,.3).setScale(.15).setAlpha(.9),this.tool_image.cup_fail=e.add.image(0,0,"cup_fail").setOrigin(.5,.3).setScale(.15).setAlpha(.9),this.tool_image[a.POT]=e.add.image(0,0,"pot_bg").setOrigin(.5,.3).setScale(.3),this.tool_image[i.RICE_CAKE]=e.add.image(-n/6,o/8,i.RICE_CAKE).setScale(.3),this.tool_image[i.NOODLE]=e.add.image(0,o/8,i.NOODLE).setScale(.35),this.tool_image[i.FISH_CAKE]=e.add.image(n/6,o/8,i.FISH_CAKE).setScale(.35),this.tool_image.water_blue=e.add.image(0,o/6,"pot_water").setScale(.3),this.tool_image.water_red=e.add.image(0,o/6,"pot_water_red").setScale(.3),this.tool_image.water_orange=e.add.image(0,o/6,"pot_water_orange").setScale(.3),this.tool_image[i.SPRING_ONION]=e.add.image(-n/8,o/16,"spring_onion_topping").setScale(.1),this.tool_image[i.SESAME]=e.add.image(0,0,"sesame_topping").setScale(.2),this.tool_image[i.EGG]=e.add.image(n/6,0,i.EGG).setScale(.2),this.tool_image.pot_fail=e.add.image(0,0,"failed_food").setScale(.35),this.tool_image.pot_front=e.add.image(0,0,"pot_front").setOrigin(.5,.3).setScale(.3),this.tool_image[a.STEAMER]=e.add.image(0,0,"steamer").setOrigin(.5,.5).setScale(.25),this.tool_image.steamer_water=e.add.image(0,0,"steamer_water").setOrigin(.5,.5).setScale(.25),this.tool_image[i.SUNDAE]=e.add.image(0,-o/2.5,"sundae").setScale(.35),this.tool_image[i.DUMPLING]=e.add.image(0,-o/2.5,"dumpling").setScale(.35),this.tool_image.steamer_fail=e.add.image(0,-o/2.5,"failed_food").setScale(.35),this.tool_image.food=e.add.image(0,0,"empty").setOrigin(.5,.2).setScale(.3),this.updateToolImage(),this.fire_image=e.add.image(0,0,"burner_fire").setOrigin(.5,0).setScale(.8),this.heating=!1,this.vapor_image=e.add.image(0,-o/2,"empty").setOrigin(.5).setScale(.3),this.name===a.STEAMER&&this.vapor_image.setY(-o/1.2);for(let a in this.tool_image)this.add(this.tool_image[a]);this.add([this.fire_image,this.vapor_image]),this.setSize(n,o).setInteractive({draggable:!0}),this.on("dragstart",(t=>{e.children.bringToTop(this),this.heating=!1})),this.on("drag",((e,t,s)=>{this.setPosition(t,s)})),this.on("dragend",((e,t,s,a)=>{a||this.move(this.returnX,this.returnY)})),this.on("drop",((t,s)=>{var i,n,o;switch(s.name){case"burner":this.name===a.CUP||s.getData("tool")||(null==(i=this.lastZone)||i.setData("tool",null),s.setData("tool",this),this.lastZone=s,this.returnX=s.parentContainer.parentContainer.x+s.parentContainer.x+s.x,this.returnY=s.parentContainer.parentContainer.y+s.parentContainer.y+s.y),this.move(this.returnX,this.returnY);break;case"tap":s.getData("tool")?this.move(this.returnX,this.returnY):(null==(n=this.lastZone)||n.setData("tool",null),s.setData("tool",this),this.lastZone=s,this.returnX=s.parentContainer.parentContainer.x+s.parentContainer.x+s.x,this.returnY=s.parentContainer.parentContainer.y+s.parentContainer.y+s.y,this.move(this.returnX,this.returnY),this.putIngredient(s.parentContainer.name));break;case"trash":this.returnTool(),e.sound.play("trash",{volume:.3}),s.getData("close")();break;case"order":this.name===a.CUP&&0==this.box.size?this.move(this.returnX,this.returnY):this.name!==a.POT&&this.name!==a.STEAMER||0!=this.temperature?(null==(o=this.lastZone)||o.setData("tool",null),this.lastZone=s,this.updateFoodImage(),this.vapor_image.setTexture("empty"),s.getData("order").submit(this)):this.move(this.returnX,this.returnY)}})),this.on("dragenter",((e,t)=>{"trash"===t.name&&t.getData("open")()})),this.on("dragleave",((e,t)=>{"trash"===t.name&&t.getData("close")()}))}putIngredient(e){this.box.add(e),this.move(this.returnX,this.returnY),this.scene.sound.play("tap1",{volume:.4}),this.updateToolImage()}updateImage(e,t=!0){if(t)for(let s in this.tool_image)this.hideImage(s);this.tool_image[e].visible=!0}hideImage(e){this.tool_image[e].visible=!1}updateCupImage(){0==this.box.size?this.updateImage(a.CUP):1==this.box.size&&this.box.has(i.WATER)?this.updateImage("cup_water"):1==this.box.size&&this.box.has(i.CIDER)?this.updateImage("cup_cider"):1==this.box.size&&this.box.has(i.COLA)?this.updateImage("cup_cola"):this.updateImage("cup_fail")}updatePotImage(){if(0==this.box.size&&(this.updateImage(this.name),this.updateImage("pot_front",!1)),this.box.has(i.SUNDAE)||this.box.has(i.DUMPLING)||this.box.has(i.CIDER)||this.box.has(i.COLA))this.updateImage("pot_fail",!1);else if(this.box.has(i.SAUCE)&&this.box.has(i.RAMEN_SOUP))this.updateImage("pot_fail",!1);else if(this.temperature>10)this.updateImage("pot_fail",!1);else{!this.box.has(i.WATER)||this.box.has(i.SAUCE)||this.box.has(i.RAMEN_SOUP)?this.box.has(i.WATER)&&this.box.has(i.SAUCE)&&!this.box.has(i.RAMEN_SOUP)?(this.hideImage("water_blue"),this.updateImage("water_red",!1)):this.box.has(i.WATER)&&!this.box.has(i.SAUCE)&&this.box.has(i.RAMEN_SOUP)&&(this.hideImage("water_blue"),this.updateImage("water_orange",!1)):this.updateImage("water_blue",!1);for(let e of this.box)[i.WATER,i.SAUCE,i.RAMEN_SOUP].includes(e)||this.updateImage(e,!1)}}updateSteamerImage(){if(this.temperature>10)return this.updateImage(this.name),void this.updateImage("steamer_fail",!1);0==this.box.size?this.updateImage(this.name):1==this.box.size&&this.box.has(i.WATER)?this.updateImage("steamer_water"):1==this.box.size&&this.box.has(i.DUMPLING)?this.updateImage(i.DUMPLING,!1):1==this.box.size&&this.box.has(i.SUNDAE)?this.updateImage(i.SUNDAE,!1):2==this.box.size&&this.box.has(i.WATER)&&this.box.has(i.DUMPLING)?(this.updateImage("steamer_water"),this.updateImage(i.DUMPLING,!1)):2==this.box.size&&this.box.has(i.WATER)&&this.box.has(i.SUNDAE)?(this.updateImage("steamer_water"),this.updateImage(i.SUNDAE,!1)):(this.updateImage(this.name),this.updateImage("steamer_fail",!1))}updateToolImage(){this.name===a.CUP?this.updateCupImage():this.name===a.POT?this.updatePotImage():this.name===a.STEAMER&&this.updateSteamerImage()}updateFoodImage(){let e="괴식";if(this.temperature<=10)if(this.name==a.POT)this.box.size>=3&&this.box.has(i.WATER)&&(this.box.has(i.SAUCE)&&this.box.has(i.RAMEN_SOUP)?e="괴식":this.box.has(i.SAUCE)&&this.box.has(i.RICE_CAKE)?e=n.KORA_TTEOKBOKKI:this.box.has(i.RAMEN_SOUP)&&this.box.has(i.NOODLE)&&(e=n.JAKO_RAMEN));else{if(this.name!=a.STEAMER)return;2==this.box.size&&this.box.has(i.WATER)&&(this.box.has(i.DUMPLING)?e=n.DAEDU_DUMPLING:this.box.has(i.SUNDAE)&&(e=n.NANDE_SUNDAE))}this.tool_image.food.setTexture(e),this.updateImage("food")}returnTool(){var e;null==(e=this.lastZone)||e.setData("tool",null),this.lastZone=null,this.returnX=this.toolX,this.returnY=this.toolY,this.move(this.returnX,this.returnY),this.box.clear(),this.temperature=0,this.vapor_image.setTexture("empty"),this.setInteractive(),this.updateToolImage()}set heating(e){this.temperatureEvent.paused&&e&&this.scene.sound.play("fire1",{volume:.7,seek:.2}),this.temperatureEvent.paused=!e,this.fire_image.visible=e}move(e,t){var s;this.setPosition(e,t),"burner"===(null==(s=this.lastZone)?void 0:s.name)&&this.box.size>0?this.heating=!0:this.heating=!1}increaseTemperature(){this.temperature=Math.min(this.temperature+1,200),this.temperature>10?this.vapor_image.setTexture("vapor_4"):this.temperature>8?this.vapor_image.setTexture("vapor_3"):this.temperature>5?this.vapor_image.setTexture("vapor_2"):this.temperature>0&&this.vapor_image.setTexture("vapor_1"),11==this.temperature&&this.scene.sound.play("fizz",{volume:.4,seek:.3}),this.updateToolImage()}static preload(e){e.load.setPath("assets/MainGame"),e.load.audio("fire1","22. 중간 훅.wav"),e.load.audio("fire2","23. 중간 훅2.wav"),e.load.audio("trash","13.훅.mp3"),e.load.audio("tap1","09. 뿅.mp3"),e.load.audio("tap2","18. 뾱.mp3"),e.load.image("cup","amount_water_glass1.png"),e.load.image("cup_water","amount_water_glass3.png"),e.load.image("cup_cider","soda6_skyblue.png"),e.load.image("cup_cola","soda8_purple.png"),e.load.image("cup_fail","cup_fail.png"),e.load.image("pot_front","pot_front.png"),e.load.image("pot_bg","pot_bg.png"),e.load.image("pot_water","pot_water.png"),e.load.image("pot_water_red","pot_water_red.png"),e.load.image("pot_water_orange","pot_water_orange.png"),e.load.image("spring_onion_topping","spring_onion_topping.png"),e.load.image("sesame_topping","sesame_topping.png"),e.load.image("steamer","steamer.png"),e.load.image("steamer_water","steamer_water.png"),e.load.image("empty","empty.png"),e.load.image("dumpling","dumpling.png"),e.load.image("sundae","sundae.png"),e.load.image("failed_food","failed_food.png"),e.load.image(n.KORA_TTEOKBOKKI,"떡볶이.png"),e.load.image(n.JAKO_RAMEN,"라면.png"),e.load.image(n.DAEDU_DUMPLING,"만두.png"),e.load.image(n.NANDE_SUNDAE,"순대.png"),e.load.image("괴식","괴식.png"),e.load.image("burner_fire","burner_fire.png"),e.load.image("vapor_1","vapor_1.png"),e.load.image("vapor_2","vapor_2.png"),e.load.image("vapor_3","vapor_3.png"),e.load.image("vapor_4","vapor_4.png"),e.load.audio("fizz","fizz.mp3")}}class x extends t.GameObjects.Container{constructor(e,t,s,a,i,n){super(e,t,s),e.add.existing(this),this.scene=e,this.width=a,this.height=i,this.name=n}createTools(){const e=.75*this.width,t=.75*this.height,s=this.parentContainer.x+this.x,a=this.parentContainer.y+this.y-.1*t;new E(this.scene,s,a,e,t,this.name),new E(this.scene,s,a,e,t,this.name),new E(this.scene,s,a,e,t,this.name),new E(this.scene,s,a,e,t,this.name),new E(this.scene,s,a,e,t,this.name)}}class S extends t.GameObjects.Container{constructor(e,t,s,i,n){super(e,t,s),e.add.existing(this);const o=new _(e,-7*i/16,0,i/8,.7*n),r=new _(e,-5*i/16,0,i/8,.7*n),h=new _(e,-3*i/16,0,i/8,.7*n),d=new _(e,-1*i/16,0,i/8,.7*n),l=new x(e,1*i/16,0,i/8,.7*n,a.POT),m=new x(e,3*i/16,0,i/8,.7*n,a.STEAMER),p=new x(e,5*i/16,0,i/8,.7*n,a.CUP),g=new f(e,7*i/16,0,i/8,.7*n);this.add([o,r,h,d,l,m,p,g]),[l,m,p].forEach((e=>{e.createTools()}))}}class w extends t.Scene{constructor(){super("MainGame")}create(){var e;const t=this.add.image(800,450-900/7,"background").setOrigin(.5);t.setScale(Math.max(s/t.width,900/t.height)),null==(e=t.preFX)||e.addBlur(0,2,2,1);const a=new r(this,800,45,s,90,60);this.order_0=new l(this,200,225,400,360,(e=>a.addEarn(e))),this.order_1=new l(this,600,225,400,360,(e=>a.addEarn(e))),this.order_2=new l(this,1e3,225,400,360,(e=>a.addEarn(e))),this.order_3=new l(this,1400,225,400,360,(e=>a.addEarn(e))),new m(this,800,405,s,90),this.add.rectangle(800,540,s,180,10528449,1),this.add.rectangle(800,765,s,270,10528449,1),new u(this,800,540,s,180),new S(this,800,765,s,270),this.order_0.newOrder(),this.order_1.newOrder(),this.order_2.newOrder(),this.order_3.newOrder();const i=()=>{console.debug("Game Start!"),a.startTimer(),this.input.off("pointerdown",i)};this.input.on("pointerup",i)}static preload(e){e.load.setPath("assets/MainGame"),e.load.image("background","background.jpg"),r.preload(e),l.preload(e),E.preload(e),m.preload(e),p.preload(e),c.preload(e),_.preload(e),g.preload(e),f.preload(e)}}class O extends t.GameObjects.Container{constructor(e,t,s,a,i,n){super(e,t,s),e.add.existing(this),this.setSize(a,i);const o=e.add.graphics().fillStyle(5724278,.7).fillRoundedRect(-a/2,-i/2,a,i,.3*i).setDepth(0),r=e.add.text(0,0,n,{fontFamily:"Jalnan",fontSize:"60px",color:"#ffffff"}).setOrigin(.5).setDepth(1).setPadding(20);this.add([o,r]),this.on("pointerover",(()=>{e.tweens.add({targets:this,scale:1.2,duration:50})})),this.on("pointerout",(()=>{e.tweens.add({targets:this,scale:1,duration:50})}))}}class A extends t.GameObjects.Container{constructor(e,t,s){super(e,t,s),e.add.existing(this);const a=e.add.text(-250,-100,"신장개업",{fontFamily:"Jalnan",fontSize:"60px",color:"#ee0000",stroke:"#666666",strokeThickness:5,shadow:{offsetX:5,offsetY:5,blur:5,stroke:!1}}).setOrigin(.5).setDepth(1).setPadding(20).setAngle(-5),i=e.add.text(0,0,"코 라 분 식",{fontFamily:"Jalnan",fontSize:"150px",color:"#ffffff",stroke:"#000000",strokeThickness:10,shadow:{offsetX:5,offsetY:5,blur:5,stroke:!1}}).setOrigin(.5).setDepth(1).setPadding(20);this.add([i,a])}}class b extends t.Scene{constructor(){super("MainMenu"),this.start_offset=Math.floor(4*Math.random())}create(){this.spring=this.add.image(800,450,"봄").setOrigin(.5).setScale(.7),this.summer=this.add.image(800,450,"여름").setOrigin(.5).setScale(.7),this.fall=this.add.image(800,450,"가을").setOrigin(.5).setScale(.7),this.winter=this.add.image(800,450,"겨울").setOrigin(.5).setScale(.7),this.spring.x=800+(this.start_offset+0)%4*this.spring.displayWidth,this.summer.x=800+(this.start_offset+1)%4*this.spring.displayWidth,this.fall.x=800+(this.start_offset+2)%4*this.spring.displayWidth,this.winter.x=800+(this.start_offset+3)%4*this.spring.displayWidth,new A(this,800,270);const e=s/3;new O(this,800,450,e,90,"영업 시작").setInteractive().on("pointerup",(()=>{this.sound.play("welcome1"),this.scene.start("MainGame")})),new O(this,800,585,e,90,"레시피").setInteractive().on("pointerup",(()=>{this.sound.play("tap1",{volume:.4}),this.scene.start("Recipe")})),new O(this,800,720,e,90,"크레딧").on("pointerup",(()=>{this.sound.play("tap1",{volume:.4}),this.scene.start("Credits")})).setInteractive()}update(){this.spring&&this.summer&&this.fall&&this.winter&&(this.spring.x-=3,this.summer.x-=3,this.fall.x-=3,this.winter.x-=3,this.spring.x<-this.spring.displayWidth&&(this.spring.x=this.start_offset+2*this.spring.displayWidth),this.summer.x<-this.spring.displayWidth&&(this.summer.x=this.start_offset+2*this.spring.displayWidth),this.fall.x<-this.spring.displayWidth&&(this.fall.x=this.start_offset+2*this.spring.displayWidth),this.winter.x<-this.spring.displayWidth&&(this.winter.x=this.start_offset+2*this.spring.displayWidth))}static preload(e){e.load.setPath("assets/MainMenu"),e.load.audio("welcome1","welcome1.wav"),e.load.image("봄","봄.jpg"),e.load.image("여름","여름.jpg"),e.load.image("가을","가을.jpg"),e.load.image("겨울","겨울.jpg")}}class y extends t.Scene{constructor(){super("Preloader")}init(){this.add.rectangle(800,450,800,28.125).setStrokeStyle(1,5724278);const e=this.add.rectangle(400,450,0,28.125,5724278);this.load.on("progress",(t=>{e.width=800*t}))}preload(){this.load.font("Jalnan","https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_four@1.2/JalnanOTF00.woff"),this.load.font("StudyHard","https://fastly.jsdelivr.net/gh/projectnoonnu/2411-3@1.0/Ownglyph_StudyHard-Rg.woff2"),b.preload(this),w.preload(this)}create(){this.scene.start("MainMenu")}}class I extends t.Scene{constructor(){super("GameOver")}create(){const e=(sessionStorage.getItem("earn")||"0").replace(/\B(?=(\d{3})+(?!\d))/g,",")+" 치즈";this.add.text(800,225,"최종점수: "+e,{fontSize:225,color:"#ffffff",fontFamily:"StudyHard",stroke:"#000000",strokeThickness:4}).setOrigin(.5);const t=this.add.text(800,675,"돌아가기",{fontSize:112.5,color:"#ff0000",fontFamily:"StudyHard"}).setOrigin(.5);t.setInteractive(),t.on("pointerup",(()=>{this.sound.play("tap1",{volume:.4}),this.scene.start("MainMenu")})),t.on("pointerover",(()=>{this.scene.scene.tweens.add({targets:t,scale:1.1,duration:100})})),t.on("pointerout",(()=>{this.scene.scene.tweens.add({targets:t,scale:1,duration:100})}))}}class T extends t.Scene{constructor(){super("Boot")}preload(){}create(){this.scene.start("Preloader")}}class C extends t.Scene{constructor(){super("Recipe")}create(){this.add.text(0,0,`${n.KORA_TTEOKBOKKI}: ${a.POT} + ${i.WATER} + ${i.RICE_CAKE} + ${i.SAUCE} [+ 갖은 양념]\n${n.JAKO_RAMEN}: ${a.POT} + ${i.WATER} + ${i.NOODLE} + ${i.RAMEN_SOUP} [+ 갖은 양념]\n\n${n.NANDE_SUNDAE}: ${a.STEAMER} + ${i.WATER} + ${i.SUNDAE}\n${n.DAEDU_DUMPLING}: ${a.STEAMER} + ${i.WATER} + ${i.DUMPLING}\n\n${n.TAP_WATER}: ${a.CUP} + ${i.WATER}\n${n.URU_CIDER}: ${a.CUP} + ${i.CIDER}\n${n.KORA_COLA}: ${a.CUP} + ${i.COLA}`,{fontSize:37.5,color:"#000000",fontFamily:"StudyHard"});const e=this.add.text(800,675,"돌아가기",{fontSize:112.5,color:"#ff0000",fontFamily:"StudyHard"}).setOrigin(.5);e.setInteractive(),e.on("pointerup",(()=>{this.sound.play("tap1",{volume:.4}),this.scene.start("MainMenu")})),e.on("pointerover",(()=>{this.scene.scene.tweens.add({targets:e,scale:1.1,duration:100})})),e.on("pointerout",(()=>{this.scene.scene.tweens.add({targets:e,scale:1,duration:100})}))}}class R extends t.Scene{constructor(){super("Credits")}create(){this.add.text(800,56.25,"기획/개발",{fontSize:56.25,color:"#000000",fontFamily:"StudyHard"}).setOrigin(.5),this.add.text(800,168.75,"실력발휘",{fontSize:112.5,color:"#000000",fontFamily:"StudyHard"}).setOrigin(.5),this.add.text(800,337.5,"효과음 제공",{fontSize:56.25,color:"#000000",fontFamily:"StudyHard"}).setOrigin(.5),this.add.text(800,450,"피디님",{fontSize:112.5,color:"#000000",fontFamily:"StudyHard"}).setOrigin(.5);const e=this.add.text(800,675,"돌아가기",{fontSize:112.5,color:"#ff0000",fontFamily:"StudyHard"}).setOrigin(.5);e.setInteractive(),e.on("pointerup",(()=>{this.sound.play("tap1",{volume:.4}),this.scene.start("MainMenu")})),e.on("pointerover",(()=>{this.scene.scene.tweens.add({targets:e,scale:1.1,duration:100})})),e.on("pointerout",(()=>{this.scene.scene.tweens.add({targets:e,scale:1,duration:100})}))}}const P={type:t.AUTO,parent:"game-container",width:s,height:900,backgroundColor:"#ffe8ee",scale:{mode:t.Scale.FIT,autoCenter:t.Scale.CENTER_BOTH},scene:[T,y,b,C,R,w,I]};document.addEventListener("DOMContentLoaded",(()=>{new t.Game(P)}));
