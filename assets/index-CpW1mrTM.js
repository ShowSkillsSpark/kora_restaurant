import{r as t}from"./phaser-y5S3hZEA.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();var e=t();const s=1600;var i=(t=>(t.POT="냄비",t.STEAMER="찜기",t.CUP="컵",t))(i||{}),r=(t=>(t.RICE_CAKE="떡",t.SAUSE="특제소스",t.FISH_CAKE="어묵",t.SPRING_ONION="파",t.WATER="물",t.CIDER="사이다",t.COLA="콜라",t))(r||{}),n=(t=>(t.KORA_TTEOKBOKKI="코라떡볶이",t))(n||{}),a=(t=>(t.TAP_WATER="수돗물",t.URU_CIDER="우루사이다",t.KORA_COLA="코라콜라",t))(a||{});const o=[["모구모구","우마이!"],["맛있게 먹었습니다~"],["우마이!","오츠레이!"],["음~","오츠레이"]];class h extends e.GameObjects.Container{constructor(t,e,s,i,r,n){super(t,e,s),t.add.existing(this),this.remain_time=n,this.elapsed=0,sessionStorage.setItem("earn","0");const a=t.add.text(-i/4-100,0,"남은 시간",{fontSize:r/2,color:"#ffffff",fontFamily:"StudyHard",stroke:"#000000",strokeThickness:4}).setOrigin(.5);this.time_text=t.add.text(-i/4+100,0,this.remain_time+" 초",{fontSize:r/2,color:"#ffffff",fontFamily:"StudyHard",stroke:"#000000",strokeThickness:4}).setOrigin(.5).setPadding(10),this.add([a,this.time_text]);const o=t.add.text(i/4-100,0,"매출",{fontSize:r/2,color:"#ffffff",fontFamily:"StudyHard",stroke:"#000000",strokeThickness:4}).setOrigin(.5);this.earn_text=t.add.text(i/4+100,0,"0 치즈",{fontSize:r/2,color:"#ffffff",fontFamily:"StudyHard",stroke:"#000000",strokeThickness:4}).setOrigin(.5).setPadding(10),this.add([o,this.earn_text]),this.remain_timer=t.time.addEvent({delay:1e3,callback:()=>{this.elapsed+=1,this.elapsed>this.remain_time?t.scene.start("GameOver"):this.time_text.setText(this.remain_time-this.elapsed+" 초")},loop:!0,paused:!0})}resetTimer(){this.remain_timer.paused=!0,this.elapsed=0}startTimer(){this.remain_timer.paused=!1}addEarn(t){let e=parseInt(sessionStorage.getItem("earn")||"0");e+=t,sessionStorage.setItem("earn",e.toString()),this.earn_text.setText(e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" 치즈")}}const d=class{constructor(t,e,s,i,r,n,a){this.name=t,this.base_price=e,this.plus_price=s,this.tool_name=i,this.necessary=new Set(r),this.plus=new Set(n),this.temperature_range=a}calculatePrice(t){if(this.tool_name!=t.name)return 0;let e=0,s=0;if(t.box.forEach((t=>{this.necessary.has(t)?e+=1:this.plus.has(t)?s+=1:s-=1})),e<this.necessary.size)return 0;let i=0;for(let r of this.temperature_range){const e=r[0];if(!(t.temperature>e))break;i=r[1]}return this.base_price+(s+i)*this.plus_price}toString(){return this.name}};d.kora_tteokbokki=new d(n.KORA_TTEOKBOKKI,4e3,500,i.POT,[r.WATER,r.RICE_CAKE,r.SAUSE],[r.FISH_CAKE,r.SPRING_ONION],[[0,-8],[5,1],[8,2],[10,-8]]);let l=d;const c=class extends l{};c.tap_water=new l(a.TAP_WATER,1e3,100,i.CUP,[r.WATER],[],[[0,0]]),c.uru_cider=new l(a.URU_CIDER,1e3,100,i.CUP,[r.CIDER],[],[[0,0]]),c.kora_cola=new l(a.KORA_COLA,1e3,100,i.CUP,[r.COLA],[],[[0,0]]);let u=c;class p extends e.GameObjects.Container{constructor(t,e,s,i,r,n){super(t,e,s),this.requirement_list=[],this.tool_list=[],this.cost=0,this.progress=[],this.progress_index=0,t.add.existing(this);const a=t.add.image(0,-r/10,"talk").setOrigin(.5);a.setScale(i/a.width,r/a.height*.7),this.text=t.add.text(0,-3*r/20,"콘레이",{fontSize:.15*r,color:"#000000",fontFamily:"StudyHard",wordWrap:{width:.9*i}}).setOrigin(.5).setPadding(10),this.face=t.add.image(0,5*r/20,"smile").setOrigin(.5),this.face.setScale(r/this.face.height*.25);const o=t.add.zone(0,0,i,r).setRectangleDropZone(i,r).setName("order");o.setData("order",this),this.add([a,this.text,this.face,o]),this.setSize(i,r),this.updateText(),this.progress_timer=t.time.addEvent({delay:1e3,callback:()=>{this.progress_index+=1,this.progress_index<this.progress.length?this.text.setText(this.progress[this.progress_index]):(this.tool_list.forEach((t=>{t.returnTool()})),this.visible=!1,this.respawn_timer.paused=!1,n(this.cost),this.cost=0)},loop:!0,paused:!0}),this.respawn_timer=t.time.addEvent({delay:1e3,callback:()=>{this.newOrder()},loop:!1,paused:!0})}submit(t){t.disableInteractive(),this.tool_list.push(t);const e=this.tool_list.length;this.tool_list.forEach(((t,s)=>{const i=this.x-this.width/2+(s+1)*this.width/(e+1),r=this.y+this.height/2;t.move(i,r)}));let s=null,i=0;this.requirement_list.forEach(((e,r)=>{const n=e.calculatePrice(t);n>i&&(s=r,i=n)})),null!=s&&(this.requirement_list.splice(s,1),this.updateText(),this.cost+=i),0==this.requirement_list.length&&(this.progress_timer.paused=!1)}updateText(){if(this.requirement_list.length>0){const t=this.requirement_list.join(", ")+" 주세요.";this.text.setText(t)}else this.text.setText(this.progress[this.progress_index])}randomRequirementList(){const t=[];for(;0==t.length;){const e=[null],s=[u.tap_water],i=e[Math.floor(Math.random()*e.length)],r=s[Math.floor(Math.random()*s.length)];i&&t.push(i),r&&t.push(r)}return t}randomProgress(){return o[Math.floor(Math.random()*o.length)]}newOrder(){this.requirement_list=this.randomRequirementList(),this.updateText(),this.tool_list=[],this.cost=0,this.progress=this.randomProgress(),this.progress_index=0,this.progress_timer.paused=!0,this.respawn_timer.reset({delay:1e3,callback:()=>{this.newOrder()},loop:!1,paused:!0}),this.visible=!0}static preload(t){t.load.setPath("assets"),t.load.image("talk","fukidashi_pop06.png"),t.load.image("smile","mark_face_smile.png"),t.load.image("jito","mark_face_jito.png"),t.load.image("ase","mark_face_ase.png"),t.load.image("angry","mark_face_angry.png"),t.load.image("cry","mark_face_cry.png"),t.load.image("laugh","mark_face_laugh.png"),t.load.image("tere","mark_face_tere.png"),t.load.image("hehe","mark_face_hehe.png")}}class m extends e.GameObjects.Container{constructor(t,s,i,r,n){super(t,s,i),t.add.existing(this);const a=t.add.graphics().fillStyle(16777215,1).fillPoints([new e.Geom.Point(-r/2+r/20,-n/2+n/5),new e.Geom.Point(-r/2-r/20,n/2),new e.Geom.Point(r/2+r/20,n/2),new e.Geom.Point(r/2-r/20,-n/2+n/5)]);this.add([a])}}class g extends e.GameObjects.Container{constructor(t,e,s,i,r,n){super(t,e,s),t.add.existing(this),this.returnX=e,this.returnY=s,this.name=n;const a=t.add.rectangle(0,0,i,r,16777215).setOrigin(.5).setStrokeStyle(5,0),o=t.add.text(0,0,n,{fontSize:r/2,color:"#ff0000",fontFamily:"StudyHard"}).setOrigin(.5).setPadding(10);this.add([a,o]),this.setSize(i,r).setInteractive({draggable:!0}),this.on("dragstart",(e=>{t.children.bringToTop(this)})),this.on("drag",((t,e,s)=>{this.setPosition(e,s)})),this.on("dragend",((t,e,s,i)=>{this.setPosition(this.returnX,this.returnY)})),this.on("drop",((t,e)=>{const s=e.getData("tool");s&&s.putIngredient(this.name),this.setPosition(this.returnX,this.returnY)}))}}class f extends e.GameObjects.Container{constructor(t,e,s,i,r,n){super(t,e,s),t.add.existing(this),this.width=i,this.height=r,this.name=n;const a=t.add.rectangle(0,0,i,r,16777215).setOrigin(.5).setStrokeStyle(5,0),o=t.add.text(0,0,n,{fontSize:r/2,color:"#000000",fontFamily:"StudyHard"}).setOrigin(.5).setPadding(10);this.add([a,o])}createIngredients(){const t=this.parentContainer.x+this.x,e=this.parentContainer.y+this.y,s=.8*this.width,i=.8*this.height;new g(this.scene,t,e,s,i,this.name),new g(this.scene,t,e,s,i,this.name)}}class x extends e.GameObjects.Container{constructor(t,e,s,i,r,n){super(t,e,s),t.add.existing(this),this.name=n;const a=t.add.rectangle(0,0,i,r,16777215).setOrigin(.5).setStrokeStyle(5,0),o=t.add.text(0,0,n,{fontSize:r/2,color:"#000000",fontFamily:"StudyHard"}).setOrigin(.5).setPadding(10),h=t.add.zone(0,0,i,r).setRectangleDropZone(i,r).setName("tap");h.setData("tool",null),this.add([a,o,h])}}class _ extends e.GameObjects.Container{constructor(t,e,s,i,n){super(t,e,s),t.add.existing(this);const a=new f(t,-7*i/16,0,i/8,n/2,r.RICE_CAKE),o=new f(t,-5*i/16,0,i/8,n/2,r.SAUSE),h=new f(t,-3*i/16,0,i/8,n/2,r.FISH_CAKE),d=new f(t,-1*i/16,0,i/8,n/2,r.SPRING_ONION),l=new x(t,3*i/16,0,i/8,n/2,r.WATER),c=new x(t,5*i/16,0,i/8,n/2,r.CIDER),u=new x(t,7*i/16,0,i/8,n/2,r.COLA);this.add([a,o,h,d,l,c,u]),[a,o,h,d].forEach((t=>{t.createIngredients()}))}}class S extends e.GameObjects.Container{constructor(t,e,s,i,r){super(t,e,s),t.add.existing(this);const n=t.add.rectangle(0,0,i,r,16777215).setOrigin(.5).setStrokeStyle(5,0),a=t.add.text(0,0,"화구",{fontSize:r/2,color:"#000000",fontFamily:"StudyHard"}).setOrigin(.5).setPadding(10),o=t.add.zone(0,0,i,r).setRectangleDropZone(i,r).setName("burner");o.setData("tool",null),this.add([n,a,o])}}class w extends e.GameObjects.Container{constructor(t,e,s,i,r){super(t,e,s),t.add.existing(this);const n=t.add.rectangle(0,0,i,r,16777215).setOrigin(.5).setStrokeStyle(5,0),a=t.add.text(0,0,"쓰레기통",{fontSize:r/2,color:"#000000",fontFamily:"StudyHard"}).setOrigin(.5).setPadding(10),o=t.add.zone(0,0,i,r).setRectangleDropZone(i,r).setName("trash");this.add([n,a,o])}}class O extends e.GameObjects.Container{constructor(t,e,s,r,n,a){super(t,e,s),this.lastZone=null,this.box=new Set,t.add.existing(this),this.toolX=e,this.toolY=s,this.returnX=e,this.returnY=s,this.name=a,this.temperature=0,this.temperatureEvent=t.time.addEvent({delay:1e3,callback:()=>this.increaseTemperature(),loop:!0,paused:!0});const o=t.add.rectangle(0,0,r,n,16777215).setOrigin(.5).setStrokeStyle(5,0);this.tool_text=t.add.text(0,-n/4,a,{fontSize:n/2,color:"#000000",fontFamily:"StudyHard"}).setOrigin(.5).setPadding(10),this.box_text=t.add.text(0,n/4,"",{fontSize:n/4,color:"#000000",fontFamily:"StudyHard",wordWrap:{width:.9*r}}).setOrigin(.5).setPadding(10),this.add([o,this.tool_text,this.box_text]),this.setSize(r,n).setInteractive({draggable:!0}),this.on("dragstart",(e=>{t.children.bringToTop(this),this.temperatureEvent.paused=!0})),this.on("drag",((t,e,s)=>{this.setPosition(e,s)})),this.on("dragend",((t,e,s,i)=>{i||this.move(this.returnX,this.returnY)})),this.on("drop",((t,e)=>{var s,r,n;switch(e.name){case"burner":this.name===i.CUP||e.getData("tool")||(null==(s=this.lastZone)||s.setData("tool",null),e.setData("tool",this),this.lastZone=e,this.returnX=e.parentContainer.parentContainer.x+e.parentContainer.x+e.x,this.returnY=e.parentContainer.parentContainer.y+e.parentContainer.y+e.y),this.move(this.returnX,this.returnY);break;case"tap":e.getData("tool")?this.move(this.returnX,this.returnY):(null==(r=this.lastZone)||r.setData("tool",null),e.setData("tool",this),this.lastZone=e,this.returnX=e.parentContainer.parentContainer.x+e.parentContainer.x+e.x,this.returnY=e.parentContainer.parentContainer.y+e.parentContainer.y+e.y,this.move(this.returnX,this.returnY),this.putIngredient(e.parentContainer.name));break;case"trash":this.returnTool();break;case"order":this.name===i.CUP&&0==this.box.size?this.move(this.returnX,this.returnY):this.name!==i.POT&&this.name!==i.STEAMER||0!=this.temperature?(null==(n=this.lastZone)||n.setData("tool",null),this.lastZone=e,e.getData("order").submit(this)):this.move(this.returnX,this.returnY)}}))}putIngredient(t){this.box.add(t),this.box_text.setText(Array.from(this.box).join(" ")),this.move(this.returnX,this.returnY)}returnTool(){var t;null==(t=this.lastZone)||t.setData("tool",null),this.lastZone=null,this.returnX=this.toolX,this.returnY=this.toolY,this.move(this.returnX,this.returnY),this.tool_text.setColor("#000000"),this.box.clear(),this.box_text.setText(""),this.temperature=0,this.setInteractive()}move(t,e){var s;this.setPosition(t,e),"burner"===(null==(s=this.lastZone)?void 0:s.name)&&this.box.size>0?(this.temperatureEvent.paused=!1,this.updateColor()):this.temperatureEvent.paused=!0}increaseTemperature(){this.temperature=Math.min(this.temperature+1,200),this.updateColor()}updateColor(){this.temperature>10?this.tool_text.setColor("#000000"):this.temperature>8?this.tool_text.setColor("#00cc00"):this.temperature>5?this.tool_text.setColor("#00aaff"):this.tool_text.setColor("#cc0000")}}class y extends e.GameObjects.Container{constructor(t,e,s,i,r,n){super(t,e,s),t.add.existing(this),this.scene=t,this.width=i,this.height=r,this.name=n;const a=t.add.rectangle(0,0,i,r,16777215).setOrigin(.5).setStrokeStyle(5,0),o=t.add.text(0,0,n,{fontSize:r/2,color:"#000000",fontFamily:"StudyHard"}).setOrigin(.5).setPadding(10);this.add([a,o])}createTools(){const t=this.parentContainer.x+this.x,e=this.parentContainer.y+this.y,s=.8*this.width,i=.8*this.height;new O(this.scene,t,e,s,i,this.name),new O(this.scene,t,e,s,i,this.name),new O(this.scene,t,e,s,i,this.name),new O(this.scene,t,e,s,i,this.name)}}class C extends e.GameObjects.Container{constructor(t,e,s,r,n){super(t,e,s),t.add.existing(this);const a=new S(t,-7*r/16,0,r/8,n/2),o=new S(t,-5*r/16,0,r/8,n/2),h=new S(t,-3*r/16,0,r/8,n/2),d=new S(t,-1*r/16,0,r/8,n/2),l=new y(t,1*r/16,0,r/8,n/2,i.POT),c=new y(t,3*r/16,0,r/8,n/2,i.STEAMER),u=new y(t,5*r/16,0,r/8,n/2,i.CUP),p=new w(t,7*r/16,0,r/8,n/2);this.add([a,o,h,d,l,c,u,p]),[l,c,u].forEach((t=>{t.createTools()}))}}class b extends e.Scene{constructor(){super("MainGame")}create(){const t=new h(this,800,45,s,90,60);this.order_0=new p(this,200,225,400,360,(e=>t.addEarn(e))),this.order_1=new p(this,600,225,400,360,(e=>t.addEarn(e))),this.order_2=new p(this,1e3,225,400,360,(e=>t.addEarn(e))),this.order_3=new p(this,1400,225,400,360,(e=>t.addEarn(e))),new m(this,800,405,s,90),new _(this,800,540,s,180),new C(this,800,765,s,270),this.order_0.newOrder(),this.order_1.newOrder(),this.order_2.newOrder(),this.order_3.newOrder();const e=()=>{console.debug("Game Start!"),t.startTimer(),this.input.off("pointerdown",e)};this.input.on("pointerdown",e)}}class k extends e.Scene{constructor(){super("Preloader")}init(){this.add.rectangle(600,450,600,40).setStrokeStyle(1,16777215);const t=this.add.rectangle(302,450,4,36,16777215);this.load.on("progress",(e=>{t.width=4+592*e}))}preload(){this.load.font("Jalnan","https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_four@1.2/JalnanOTF00.woff"),this.load.font("StudyHard","https://fastly.jsdelivr.net/gh/projectnoonnu/2411-3@1.0/Ownglyph_StudyHard-Rg.woff2"),p.preload(this)}create(){this.scene.start("MainMenu")}}class T extends e.GameObjects.Container{constructor(t,e,s,i,r,n){super(t,e,s),t.add.existing(this),this.setSize(i,r);const a=t.add.graphics().fillStyle(5724278,.5).fillRoundedRect(-i/2,-r/2,i,r,.3*r).setDepth(0);this.add([a,t.add.text(0,0,n,{fontFamily:"Jalnan",fontSize:"60px",color:"#ffffff"}).setOrigin(.5).setDepth(1).setPadding(20)]),this.on("pointerover",(()=>{t.tweens.add({targets:this,scale:1.2,duration:50})})),this.on("pointerout",(()=>{t.tweens.add({targets:this,scale:1,duration:50})}))}}class E extends e.GameObjects.Container{constructor(t,e,s){super(t,e,s),t.add.existing(this);const i=t.add.text(-250,-100,"신장개업",{fontFamily:"Jalnan",fontSize:"60px",color:"#ee0000",stroke:"#000000",strokeThickness:2,shadow:{offsetX:5,offsetY:5,blur:5,stroke:!1}}).setOrigin(.5).setDepth(1).setPadding(20).setAngle(-5),r=t.add.text(0,0,"코 라 분 식",{fontFamily:"Jalnan",fontSize:"150px",color:"#ffffff",stroke:"#000000",strokeThickness:4,shadow:{offsetX:5,offsetY:5,blur:5,stroke:!1}}).setOrigin(.5).setDepth(1).setPadding(20);this.add([r,i])}}class P extends e.Scene{constructor(){super("MainMenu")}create(){new E(this,800,300);const t=s/3;new T(this,800,450,t,90,"영업 시작").setInteractive().on("pointerup",(()=>{this.scene.start("MainGame")})),new T(this,800,585,t,90,"레시피").setInteractive().on("pointerup",(()=>{})),new T(this,800,720,t,90,"크레딧").setInteractive().on("pointerup",(()=>{}))}}class v extends e.Scene{constructor(){super("GameOver")}create(){this.scene.start("MainMenu")}}class I extends e.Scene{constructor(){super("Boot")}preload(){}create(){this.scene.start("Preloader")}}class R extends e.Scene{constructor(){super("Recipe")}create(){}}class A extends e.Scene{constructor(){super("Credits")}create(){}}const z={type:e.AUTO,parent:"game-container",width:s,height:900,backgroundColor:"#ffe8ee",scale:{mode:e.Scale.FIT,autoCenter:e.Scale.CENTER_BOTH},scene:[I,k,P,R,A,b,v]};document.addEventListener("DOMContentLoaded",(()=>{new e.Game(z)}));
